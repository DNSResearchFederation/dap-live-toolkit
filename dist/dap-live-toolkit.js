!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DAPLiveToolkit=t():e.DAPLiveToolkit=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return o}));class n{constructor(e){this._config=e}async callApiConnection(e,t={},i={}){let n=Object.assign(Object.assign({},this._config),i),a=(n.useStage?"https://stage-webservices.dap.live":"https://webservices.dap.live")+"/feed/"+e+"?apiKey="+n.apiKey+"&apiSecret="+n.apiSecret;if(Object.keys(t).length){let e=[];Object.keys(t).forEach(i=>{e.push(i+"="+t[i])}),a+="&"+e.join("&")}let s=await fetch(a);return await s.json()}}class a extends HTMLElement{constructor(e={},t){if(super(),t)this._element=document.querySelector(t);else if(this._element=this,!e.apiKey){let t=this.closest("[data-dap-api-key]");t&&(e.apiKey=t.dataset.dapApiKey,e.apiSecret=t.dataset.dapApiSecret,e.useStage=t.dataset.dapUseStage)}let i={};this._element.querySelectorAll("template[data-property]").forEach(e=>{i[e.dataset.property]=e.innerHTML}),this._properties=Object.assign(Object.assign(Object.assign({},e),this.dataset),i),this._element.classList.add("dap-component"),this.init(this._element,this._properties)}async callApiConnection(e,t={},i={}){let a=new n(Object.assign(Object.assign({},this._properties),i));return await a.callApiConnection(e,t)}}class s extends a{async init(e,t){let i=[];t.tableConnectionPath&&(i=await this.callApiConnection(t.tableConnectionPath,{limit:t.tableLimit||50}),console.log(i));let n="<div>";if(t.title&&(n+=`<h4>${t.title}</h4>`),t.categories||t.time){if(n+="<div>",t.categories){t.categories.split(",").forEach(e=>n+=`<div><div>${e}</div></div>`)}t.time&&(n+=`<time>up to ${t.time}</time>`),n+="</div>"}if(t.description&&(n+=`<div class="description">${t.description}</div>`),n+='<div class="table"><table><tr>',t.tableHeaders){t.tableHeaders.split(",").forEach(e=>n+=`<th>${e}</th>`)}n+="</tr>";let a=t.tableDataKeys.split(",");i.forEach(e=>{n+="<tr>",a.forEach(t=>{n+=`<td>${e[t]}</td>`}),n+="</tr>"}),e.innerHTML=n}}class o{constructor(e){this._config=e}async callApiConnection(e,t={},i={}){let a=new n(Object.assign(Object.assign({},this._config),i));return await a.callApiConnection(e,t)}createTable(e,t){new s(Object.assign(Object.assign({},this._config),t),e)}}customElements.define("dap-table",s)}]).default}));